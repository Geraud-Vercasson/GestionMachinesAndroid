webpackJsonp([1],{"/yRs":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("diQi"),i=a.n(s),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vue-street-view-pano-container"},[e("div",{ref:"vue-street-view-pano",staticClass:"vue-street-view-pano"}),this._v(" "),this._t("default")],2)},staticRenderFns:[]},c=function(t){a("Y/hG")},r=a("VU/8")(i.a,n,!1,c,null,null);e.default=r.exports},"2lbK":function(t,e){},"5ZbH":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("kXiA"),i=a.n(s),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vue-map-container"},[e("div",{ref:"vue-map",staticClass:"vue-map"}),this._v(" "),e("div",{staticClass:"vue-map-hidden"},[this._t("default")],2),this._v(" "),this._t("visible")],2)},staticRenderFns:[]},c=function(t){a("Fi9F")},r=a("VU/8")(i.a,n,!1,c,null,null);e.default=r.exports},"5cLx":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Vj7G"),i=a.n(s),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{ref:"flyaway"},[this._t("default")],2)])},staticRenderFns:[]},c=a("VU/8")(i.a,n,!1,null,null,null);e.default=c.exports},CpkJ:function(t,e){t.exports={myAPIkey:"AIzaSyDoyX21OwUlYyGMutpLRdb1Dtuk8kVYS7U"}},Fi9F:function(t,e){},G5Sm:function(t,e){},IPEE:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i=a("mtWM"),n=a.n(i),c={name:"app",data:function(){return{msg:"Bienvenue dans la gestion du parc de machines!",listeMachines:[],searchedListMachines:[],loading:!1,error:null,myPosition:{lat:0,lng:0},shown:"*",timer:"",search:""}},created(){this.getMachineList(),this.timer=setInterval(this.getMachineList,6e4)},methods:{machinesFilter(t){return"OK"===t?this.searchedListMachines.filter(function(t){return"true"===t.status}):"KO"===t?this.searchedListMachines.filter(function(t){return"false"===t.status}):"*"===t?this.searchedListMachines:[]},getMachineList(){this.loading=!0,navigator.geolocation.getCurrentPosition(t=>{this.myPosition={lat:t.coords.latitude,lng:t.coords.longitude},console.log(this.myPosition)},t=>{console.log(t)},{timeout:3e4,enableHighAccuracy:!0}),n.a.get("https://machine-api-campus.herokuapp.com/api/machines").then(t=>{this.loading=!1,this.listeMachines=t.data,this.searchedListMachines=this.listeMachines}).catch(t=>{this.error=t})}},computed:{machinesSearchFilter(){return this.machinesFilter(this.shown).filter(t=>{if(t.hasOwnProperty("name"))return t.name.toLowerCase().includes(this.search.toLowerCase())})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("img",{attrs:{src:"http://www.thelogofactory.com/wp-content/uploads/2015/08/coffee-services-unlimited-logo.png"}}),t._v(" "),a("h1",[t._v(t._s(t.msg))]),t._v(" "),null!=t.error?a("h2",{staticClass:"red"},[t._v(" une erreur est survenue : "+t._s(t.error))]):t._e(),t._v(" "),t.loading?a("h2",[t._v("Requête en cours")]):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-5",attrs:{for:"selectMachines"}},[t._v("Sélectionnez les machines à afficher")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.shown,expression:"shown"}],staticClass:"form-control col-sm-7",attrs:{id:"selectMachines"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.shown=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"*"}},[t._v("Toutes")]),t._v(" "),a("option",{attrs:{value:"OK"}},[t._v("Actives")]),t._v(" "),a("option",{attrs:{value:"KO"}},[t._v("Inactives")])])]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-5",attrs:{for:"searchedMachines"}},[t._v("Recherche d'une machine")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control col-sm-5",attrs:{id:"searchedMachines",type:"text"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn btn-primary col-sm-2",on:{click:function(e){t.search=""}}},[t._v("Reset")])])]),t._v(" "),a("div",{staticClass:"row"},[a("router-link",{staticClass:"btn btn-primary col-sm-6",attrs:{to:"/list"}},[t._v("Accéder à la liste des machines")]),t._v(" "),a("router-link",{staticClass:"btn btn-primary col-sm-6",attrs:{to:"/map"}},[t._v("Accéder à la carte des machines")])],1),t._v(" "),a("br"),t._v(" "),a("div",[a("ajout-machine",{on:{success:t.getMachineList}})],1),t._v(" "),a("router-view",{attrs:{machines:t.machinesSearchFilter,position:t.myPosition},on:{success:t.getMachineList}})],1)},staticRenderFns:[]},o=a("VU/8")(c,r,!1,function(t){a("dQe2")},"data-v-c39672d8",null).exports,l=a("/ocq"),d={name:"editer-machine",props:["machineEdit"],methods:{edit(){$("#editModal"+this.machineEdit.id).modal("hide");const t="https://machine-api-campus.herokuapp.com/api/machines/"+this.machineEdit.id;this.machineEdit.checkedAt=Date().toString(),n.a.put(t,this.machineEdit).then(t=>{this.$emit("success")}).catch(t=>{console.log(t)})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#editModal"+t.machineEdit.id}},[t._v("\n  Editer\n")]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"editModal"+t.machineEdit.id,tabindex:"-1",role:"dialog","aria-labelledby":"ajoutModalCenterTitle","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0,!1,!1),t._v(" "),a("form",{on:{submit:t.edit}},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"nomMachineEdit"}},[t._v("Nom de la machine")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.machineEdit.name,expression:"machineEdit.name"}],staticClass:"form-control",attrs:{type:"text",id:"nomMachineEdit",placeholder:t.machineEdit.name},domProps:{value:t.machineEdit.name},on:{input:function(e){e.target.composing||t.$set(t.machineEdit,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"latitudeMachineEdit"}},[t._v("Latitude")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.machineEdit.latitude,expression:"machineEdit.latitude"}],staticClass:"form-control",attrs:{type:"text",id:"latitudeMachineEdit",placeholder:"45.1856964"},domProps:{value:t.machineEdit.latitude},on:{input:function(e){e.target.composing||t.$set(t.machineEdit,"latitude",e.target.value)}}}),t._v(" "),a("label",{attrs:{for:"longitudeMachineEdit"}},[t._v("Longitude")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.machineEdit.longitude,expression:"machineEdit.longitude"}],staticClass:"form-control",attrs:{type:"text",id:"longitudeMachineEdit",placeholder:"5.7287321"},domProps:{value:t.machineEdit.longitude},on:{input:function(e){e.target.composing||t.$set(t.machineEdit,"longitude",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.machineEdit.status,expression:"machineEdit.status"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"statusMachineEdit"},domProps:{checked:Array.isArray(t.machineEdit.status)?t._i(t.machineEdit.status,null)>-1:t.machineEdit.status},on:{change:function(e){var a=t.machineEdit.status,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n=t._i(a,null);s.checked?n<0&&(t.machineEdit.status=a.concat([null])):n>-1&&(t.machineEdit.status=a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.machineEdit,"status",i)}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"statusMachineEdit"}},[t._v("Activée")])])]),t._v(" "),t._m(1,!1,!1)])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"editModalLongTitle"}},[this._v("Editer")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Annuler")]),this._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("Enregistrer")])])}]},h=a("VU/8")(d,u,!1,function(t){a("2lbK")},"data-v-10555ed2",null).exports,m={name:"machine",props:["machine"],components:{EditerMachine:h,"editer-machine":h},methods:{deleteMachine(){const t="https://machine-api-campus.herokuapp.com/api/machines/"+this.machine.id;n.a.delete(t).then(t=>{this.success()})},success(){this.$emit("success")}}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",[this._v("Machine "+this._s(this.machine.name))]),this._v(" "),e("h2",{class:{green:"true"===this.machine.status,red:"false"===this.machine.status}},[this._v("Status "+this._s("true"===this.machine.status?"OK":"KO"))]),this._v(" "),e("h3",[this._v("Last time checked : "+this._s(this.machine.checkedAt.toLocaleString()))]),this._v(" "),e("button",{staticClass:"btn btn-danger",on:{click:this.deleteMachine}},[this._v("Supprimer")]),this._v(" "),e("editer-machine",{attrs:{machineEdit:this.machine},on:{success:this.success}})],1)},staticRenderFns:[]},p={name:"machines-list",components:{machine:a("VU/8")(m,v,!1,function(t){a("IPEE")},"data-v-aa452408",null).exports},props:["machines"],methods:{success(){this.$emit("success")}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v("Liste des machines")]),t._v(" "),t._l(t.machines,function(e){return a("machine",{key:e.id,staticClass:"bordered",attrs:{machine:e},on:{success:t.success}})})],2)},staticRenderFns:[]},f=a("VU/8")(p,_,!1,function(t){a("Rgg1")},"data-v-a24818d2",null).exports,g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h2",[this._v("Carte des machines")]),this._v(" "),e("gmap-map",{staticStyle:{width:"100%",height:"500px",margin:"auto"},attrs:{center:this.position,zoom:8}},this._l(this.machines,function(t){return e("gmap-marker",{key:t.id,attrs:{position:{lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},clickable:!0,label:t.name}})}))],1)},staticRenderFns:[]},b=a("VU/8")({name:"machines-map",props:["machines","position"]},g,!1,function(t){a("j1B1")},"data-v-c105b5c0",null).exports,y=a("sA6N"),C={name:"ajout-machine",data:()=>({machine:{name:"",status:"false",latitude:"45.1856964",longitude:"5.7287321",checkedAt:0}}),methods:{ajout(){$("#ajoutModal").modal("hide"),this.machine.checkedAt=Date().toString(),n.a.post("https://machine-api-campus.herokuapp.com/api/machines",this.machine).then(t=>{this.$emit("success")}).catch(t=>{console.log(t)})}}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#ajoutModal"}},[t._v("\n    Ajouter une Machine\n  ")]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"ajoutModal",tabindex:"-1",role:"dialog","aria-labelledby":"ajoutModalCenterTitle","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0,!1,!1),t._v(" "),a("form",{on:{submit:t.ajout}},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"nomMachineAjout"}},[t._v("Nom de la machine")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.machine.name,expression:"machine.name"}],staticClass:"form-control",attrs:{type:"text",id:"nomMachineAjout",placeholder:"Entrez un nom",required:""},domProps:{value:t.machine.name},on:{input:function(e){e.target.composing||t.$set(t.machine,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"latitudeMachineAjout"}},[t._v("Latitude")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.machine.latitude,expression:"machine.latitude"}],staticClass:"form-control",attrs:{type:"text",id:"latitudeMachineAjout",placeholder:"45.1856964"},domProps:{value:t.machine.latitude},on:{input:function(e){e.target.composing||t.$set(t.machine,"latitude",e.target.value)}}}),t._v(" "),a("label",{attrs:{for:"longitudeMachineAjout"}},[t._v("Longitude")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.machine.longitude,expression:"machine.longitude"}],staticClass:"form-control",attrs:{type:"text",id:"longitudeMachineAjout",placeholder:"5.7287321"},domProps:{value:t.machine.longitude},on:{input:function(e){e.target.composing||t.$set(t.machine,"longitude",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.machine.status,expression:"machine.status"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"statusMachineAjout","true-value":"true","false-value":"false"},domProps:{checked:Array.isArray(t.machine.status)?t._i(t.machine.status,null)>-1:t._q(t.machine.status,"true")},on:{change:function(e){var a=t.machine.status,s=e.target,i=s.checked?"true":"false";if(Array.isArray(a)){var n=t._i(a,null);s.checked?n<0&&(t.machine.status=a.concat([null])):n>-1&&(t.machine.status=a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.machine,"status",i)}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"statusMachineAjout"}},[t._v("Activée")])])]),t._v(" "),t._m(1,!1,!1)])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"ajoutModalLongTitle"}},[this._v("Ajouter une machine")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Annuler")]),this._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("Enregistrer")])])}]},M=a("VU/8")(C,E,!1,function(t){a("G5Sm")},"data-v-34ca8656",null).exports;s.a.component("ajout-machine",M),s.a.component("app",o),s.a.use(y,{load:{key:a("CpkJ").myAPIkey}}),s.a.use(l.a);const k=[{path:"/list",name:"list",component:f},{path:"/map",name:"map",component:b}],x=new l.a({routes:k});new s.a({el:"#app",router:x,template:"<App/>",components:{App:o}})},Rgg1:function(t,e){},"Y/hG":function(t,e){},YI6p:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("jIen"),i=a.n(s),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("label",[e("span",{domProps:{textContent:this._s(this.label)}}),this._v(" "),e("input",{ref:"input",class:this.className,attrs:{type:"text",placeholder:this.placeholder}})])},staticRenderFns:[]},c=a("VU/8")(i.a,n,!1,null,null,null);e.default=c.exports},dQe2:function(t,e){},j1B1:function(t,e){},preG:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("osty"),i=a.n(s),n={render:function(){var t=this.$createElement;return(this._self._c||t)("input",{ref:"input",attrs:{type:"text",placeholder:this.placeholder},domProps:{value:this.value}})},staticRenderFns:[]},c=a("VU/8")(i.a,n,!1,null,null,null);e.default=c.exports}},["NHnr"]);
//# sourceMappingURL=app.ec2d886934f0d49d39d8.js.map